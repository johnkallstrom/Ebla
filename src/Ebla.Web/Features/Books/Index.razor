@page "/books"
@attribute [Authorize(Roles = "User")]

<PageTitle>Ebla - Books</PageTitle>

<MudGrid>
    <MudItem sm="12" xl="8">
        <MudTable T="BookViewModel" Items="BookList" Hover="true" Class="mt-3" MultiSelection="true" SelectOnRowClick="false" SelectedItems="SelectedBooks" SelectedItemsChanged="SelectedBooksChanged">
            <ToolBarContent>
                <MudText Typo="Typo.h6">Books</MudText>
                <AuthorizeView Context="Administrator" Roles="Administrator">
                    <Authorized>
                        <MudToolBar>
                            <MudIconButton Icon="@Icons.Material.Outlined.Add" OnClick="ShowCreateDialog" />
                            <MudIconButton Icon="@Icons.Material.Outlined.Edit" Disabled="DisableEditButton" />
                            <MudIconButton Icon="@Icons.Material.Outlined.Delete" OnClick="ShowDeleteConfirmationDialog" Disabled="DisableDeleteButton" />
                        </MudToolBar>
                    </Authorized>
                </AuthorizeView>
            </ToolBarContent>
            <HeaderContent>
                <MudTh><MudTableSortLabel SortBy="SortBy.Id">#</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.Title">Title</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.Author">Author</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.Genre">Genre</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.Language">Language</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.Published">Published</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="SortBy.CreatedOn">Created</MudTableSortLabel></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="#">@context.Id</MudTd>
                <MudTd DataLabel="Title"><MudLink Href="@($"/books/{context.Id}")" Underline="Underline.Hover" Color="Color.Default">@context.Title</MudLink></MudTd>
                <MudTd DataLabel="Author">@context.Author</MudTd>
                <MudTd DataLabel="Genre">@context.Genre</MudTd>
                <MudTd DataLabel="Language">@context.Country</MudTd>
                <MudTd DataLabel="Published">@context.Language</MudTd>
                <MudTd DataLabel="Created">@context.CreatedOn.ToCustomDateFormat()</MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager HidePageNumber="true" />
            </PagerContent>
        </MudTable>
    </MudItem>
</MudGrid>