@page "/books"
@attribute [Authorize(Roles = "User")]

<PageTitle>Ebla - Books</PageTitle>

<MudGrid>
    <MudItem sm="12" xl="8">
        <MudTable Items="BookList" Hover="true" Class="mt-3">
            <ToolBarContent>
                <MudText Typo="Typo.h6">Books</MudText>
                <AuthorizeView Context="Administrator" Roles="Administrator">
                    <Authorized>
                        <MudToolBar>
                            <MudIconButton Icon="@Icons.Material.Outlined.Add" OnClick="ShowCreateBookDialog" />
                        </MudToolBar>
                    </Authorized>
                </AuthorizeView>
            </ToolBarContent>
            <HeaderContent>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Id)">#</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Title)">Title</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Author)">Author</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Genre)">Genre</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Language)">Language</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.Published)">Published</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortBy="new Func<BookViewModel, object>(x => x.CreatedOn)">Created</MudTableSortLabel></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="#">@context.Id</MudTd>
                <MudTd DataLabel="Title">@context.Title</MudTd>
                <MudTd DataLabel="Author">@context.Author</MudTd>
                <MudTd DataLabel="Genre">@context.Genre</MudTd>
                <MudTd DataLabel="Language">@context.Country</MudTd>
                <MudTd DataLabel="Published">@context.Language</MudTd>
                <MudTd DataLabel="Created">@context.CreatedOn.ToCustomDateFormat()</MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager HidePageNumber="true" />
            </PagerContent>
        </MudTable>
    </MudItem>
</MudGrid>