@page "/libraries"
@attribute [Authorize(Roles = "User")]

<PageTitle>Ebla - Libraries</PageTitle>

<MudTable Items="Model.Data" Hover="true" Loading="@Loading" LoadingProgressColor="Color.Info">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Libraries</MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>#</MudTh>
        <MudTh>Name</MudTh>
        <MudTh>Established</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="#">@context.Id</MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        @if (context.Established.HasValue)
        {
            <MudTd DataLabel="Established">@context.Established.Value.ToYear()</MudTd>
        }
        else
        {
            <MudTd DataLabel="Established">No date</MudTd>
        }
    </RowTemplate>
    <PagerContent>
        <MudPagination Count="@Model.TotalPages" Selected="@Model.PageNumber" SelectedChanged="OnPageChangeAsync" Class="pa-4"></MudPagination>
    </PagerContent>
</MudTable>